(function($,marketoFat){marketoFat.requests={};marketoFat.form={};marketoFat.form.collection={};marketoFat.data={};marketoFat.form.populateWithData=function(formId){var form=marketoFat.form.collection[formId];$.each(marketoFat.requests[formId].data,function(key,value){form.find('[name="'+key+'"]').val(value);});};marketoFat.form.startRequest=function(formId){if(!marketoFat.prepopulate)return;marketoFat.form.collection[formId]=$('#mktoForm_'+formId);marketoFat.data.sendRequest(formId);};marketoFat.form.finishRequest=function(form){if(!marketoFat.prepopulate)return;var formId=form.getId();if(typeof marketoFat.requests[formId]==='undefined'){marketoFat.requests[formId]={formFinish:false,dataFinish:false,data:{}};}
marketoFat.requests[formId].formFinish=true;if(marketoFat.requests[formId].dataFinish&&marketoFat.requests[formId].formFinish){marketoFat.form.populateWithData(formId);}};marketoFat.data.sendRequest=function(formId){var data={action:'marketo_ajax_get_lead',form_id:formId};jQuery.post(marketoFat.ajaxurl,data,function(response){if(response.success){marketoFat.data.finishRequest(response.form_id,response.data);}},'json');};marketoFat.data.finishRequest=function(formId,data){if(typeof marketoFat.requests[formId]==='undefined'){marketoFat.requests[formId]={formFinish:false,dataFinish:false,data:{}};}
marketoFat.requests[formId].dataFinish=true;marketoFat.requests[formId].data=data;if(marketoFat.requests[formId].dataFinish&&marketoFat.requests[formId].formFinish){marketoFat.form.populateWithData(formId);}};})(jQuery,marketoFat);(function($,marketoFat){marketoFat.popout.toggle=function(tab){var $tab=$(tab),$popout=$tab.closest('.marketo-fat-popout'),$outer=$popout.find('.mfatp-outer'),$body=$popout.find('.mfatp-body'),tabheight=$tab.outerHeight();tabheight+=parseInt($tab.css('margin-bottom'));if($outer.height()>tabheight){$outer.animate({'height':tabheight});}else{$body.css('height','auto');$outer.css('height','auto');var bodyWidth=$body.height();$outer.css('height','0');$body.css('height',bodyWidth);$outer.animate({'height':bodyWidth+tabheight});}};})(jQuery,marketoFat);